#include "Task_UI.h"
#include "stdio.h"
#include "CsUI.h"
#include "CsUI_Font.h"
#include "FlashControl.h"
#include "CslRTC.h"
#include "HeatControlSys.h"
#include "Math.h"
#include "stdlib.h"


CS_FRAME(xChildFrame1, NULL, 10, 30, 20, 40, 0x3300, NULL);
CS_FRAME(xChildFrame2, NULL, 100, 120, 20, 40, 0x0000, NULL);
CS_FRAME(xChildFrame3, NULL, 210, 330, 40, 80, 0xF1FF, NULL);

TCsUI_Bitmap xBitmap1;

volatile const unsigned char xBitmapdata1[] ={
	0x42, 0x4D, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x28, 0x00, 
	0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 
	0xFF, 0xFF, 0xFF, 0xFF, 0xEF, 0xDF, 0xFF, 0xDF, 0xFF, 0xFE, 0xFF, 0xFF, 0xE7, 0x9F, 0xFF, 0xDF, 
	0xFF, 0xFE, 0xFF, 0xE7, 0xF7, 0xBF, 0xFF, 0xDF, 0xFC, 0x00, 0x00, 0x33, 0x00, 0x03, 0xFF, 0xDF, 
	0xFF, 0xFE, 0xFF, 0xF9, 0xFD, 0xFF, 0xFF, 0xDF, 0xFF, 0xFE, 0xFF, 0xFB, 0xFD, 0xFF, 0xFF, 0xDF, 
	0xFF, 0x00, 0x00, 0xFF, 0x80, 0x07, 0x80, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0x9F, 0xF7, 0xFF, 0x9F, 
	0xFF, 0xFF, 0xFF, 0xE3, 0x9F, 0xF7, 0xFF, 0x8F, 0xFF, 0x00, 0x01, 0xFB, 0x80, 0x07, 0xFF, 0x8F, 
	0xFF, 0x3E, 0xFD, 0xFB, 0x9F, 0xF7, 0xFF, 0xAF, 0xFF, 0x3E, 0xFD, 0xFB, 0x9F, 0xF7, 0xFF, 0x27, 
	0xFF, 0x3E, 0xFD, 0xFB, 0x80, 0x07, 0xFF, 0x77, 0xFF, 0x3E, 0xFD, 0xFB, 0x9F, 0xF7, 0xFE, 0x73, 
	0xFF, 0x00, 0x01, 0xFB, 0x9F, 0xF7, 0xFC, 0xF9, 0xFF, 0x7F, 0xFD, 0xFB, 0x80, 0x07, 0xF9, 0xFC, 
	0xFE, 0x7F, 0xFF, 0xFB, 0x9F, 0xF7, 0xF3, 0xFE, 0x7E, 0x7F, 0xFF, 0xF1, 0xFF, 0xFF, 0xCF, 0xFF, 
	0x1C, 0xFF, 0xFF, 0xE6, 0xFF, 0xFF, 0x9F, 0xFF, 0xC5, 0xFF, 0xFF, 0xEF, 0x00, 0x01, 0xFF, 0xFF, 
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
};

CS_BITMAP(xBitmap1, NULL, 100, 200, 200, 300, 0xFF00, 0x00, xBitmapdata1);

CS_LABLE(xLable1, NULL, 50, 100, 50, 70, 0xFFFF, 0x0000 ,"ABCD12345", NULL);

TCsUI_BaseObjectTable xChildFrame4_ChildTable[]={&xLable1.Obj};

CS_FRAME(xChildFrame4, NULL, 300, 480, 5, 90, 0xFF00, xChildFrame4_ChildTable);

TCsUI_BaseObjectTable xFrame1_ChildTable[]={&xChildFrame1.Obj, &xChildFrame2.Obj, &xChildFrame3.Obj, &xChildFrame4.Obj, &xBitmap1.Obj};

CS_FRAME(xFrame1, NULL, 0, 480, 0, 320, 0x5500, xFrame1_ChildTable);

static char string_buf[50];
//static uint32_t InitCount = INIT_TOTAL_COUNT;

uint8_t UI_Mode = 0;   //0:Main   1:Config


void static UI_ShowStartupLogo(void)
{
	/*显示   易暖科技 */
}

void static UI_Init(void)
{
//	uint32_t Qv;
//	uint32_t Qr;
	
	CsUI_Init();
		
	xChildFrame1.Parent = &xFrame1;
	xChildFrame2.Parent = &xFrame1;
	xChildFrame3.Parent = &xFrame1;
	xChildFrame4.Parent = &xFrame1;
	
	xLable1.Parent = &xChildFrame4;
	xLable1.Font = CsUI_Font_ASCII_1218;
	
	xBitmap1.Parent = &xChildFrame1;
	
	UI_ShowStartupLogo();
	
	xFrame1.Obj.Draw(&xFrame1);
	
	//TCsUI_Lable_Draw(NULL);
}


void UI_MainShow(void)
{
	return;
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
	CslLCD_FillRect(100,100,400,200, 0x10f0);
	CslLCD_FillRect(100,100,400,200, ~0x10f0);
}

void vTask_UI( void *pvParameters )
{
	unsigned int UI_Tick = 0;
	UI_Init();
	
//	uint32_t iTime=0;
//	CslRTC_Time ui_time;
//	CslRTC_Date ui_date;
	
	//uint8_t Last_UI_Mode = UI_Mode;
	UI_MainShow();
	
	CsUI_DrawLine(20, 40, 40, 20, 0x1234);
	
	float i=0;
	int xx,yy;
	int xx0,yy0;
	srand(9999);
	//xx0 = 80 * cos(i * 3.1415 / 180);
	//yy0 = 100 * sin(i * 3.1415 / 180);
	xx = 0;
	yy = 0;
	xx0 = sizeof(TBitmap_Head);
	yy0 = 0;
	
	while(1)
	{
		xx = rand() % 200;//480;
		yy = rand() % 20;//320;
		CsUI_DrawCircle(200, 200, xx, rand() % 65536);
		xx0 = xx;
		yy0 = yy;
	}
	
	while(1)
	{
		UI_Tick++;
	}
}
